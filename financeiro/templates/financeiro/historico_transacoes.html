{% extends 'core/base.html' %}
{% block content_title %}Histórico de Transações{% endblock %}
{% block content %}
<div class="container-fluid" style="width: 100%; padding-right: 0;">
  <div class="card border-0 shadow-sm" style="border-radius: 15px;">
    <div class="card-header bg-gradient" style="background: linear-gradient(45deg, #dc3545, #e4606d); border-top-left-radius: 15px; border-top-right-radius: 15px;">
      <h1 class="text-white m-0" style="font-size: 1.3rem; font-weight: 600; display: flex; align-items: center;">
        <i class="bi bi-clock-history me-2"></i> Histórico de Transações
      </h1>
    </div>
    <div class="card-body p-4" style="background: #fff; border-bottom-left-radius: 15px; border-bottom-right-radius: 15px;">
      <h3 style="color: #000; font-size: 1.2rem; font-weight: 600;">Vendas</h3>
      {% if vendas %}
      <table class="table table-striped table-hover" style="color: #000;">
        <thead>
          <tr class="bg-light">
            <th style="font-size: 1rem; font-weight: 500;">Produto</th>
            <th style="font-size: 1rem; font-weight: 500;">Quantidade</th>
            <th style="font-size: 1rem; font-weight: 500;">Valor Total</th>
            <th style="font-size: 1rem; font-weight: 500;">Data</th>
          </tr>
        </thead>
        <tbody>
          {% for venda in vendas %}
          <tr>
            <td style="font-size: 1rem; font-weight: 400;">{{ venda.produto.nome }}</td>
            <td style="font-size: 1rem; font-weight: 400;">{{ venda.quantidade_vendida }}</td>
            <td style="font-size: 1rem; font-weight: 400;">R$ {{ venda.valor_total|floatformat:2 }}</td>
            <td style="font-size: 1rem; font-weight: 400;">{{ venda.data_venda }}</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
      {% else %}
      <p class="text-muted" style="color: #000; font-size: 1rem; font-weight: 400;">Nenhuma venda registrada.</p>
      {% endif %}

      <h3 style="color: #000; font-size: 1.2rem; font-weight: 600;">Compras</h3>
      {% if compras %}
      <table class="table table-striped table-hover" style="color: #000;">
        <thead>
          <tr class="bg-light">
            <th style="font-size: 1rem; font-weight: 500;">Produto</th>
            <th style="font-size: 1rem; font-weight: 500;">Quantidade</th>
            <th style="font-size: 1rem; font-weight: 500;">Valor Unitário</th>
            <th style="font-size: 1rem; font-weight: 500;">Data</th>
          </tr>
        </thead>
        <tbody>
          {% for compra in compras %}
          <tr>
            <td style="font-size: 1rem; font-weight: 400;">{{ compra.produto.nome }}</td>
            <td style="font-size: 1rem; font-weight: 400;">{{ compra.quantidade_comprada }}</td>
            <td style="font-size: 1rem; font-weight: 400;">R$ {{ compra.valor_unitario|floatformat:2 }}</td>
            <td style="font-size: 1rem; font-weight: 400;">{{ compra.data_compra }}</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
      {% else %}
      <p class="text-muted" style="color: #000; font-size: 1rem; font-weight: 400;">Nenhuma compra registrada.</p>
      {% endif %}
      <div class="col-12 d-flex justify-content-end mt-3">
        <a href="{% url 'financeiro:dashboard_financeiro' %}" class="btn btn-secondary" style="background: #6c757d; border: none; border-radius: 8px; padding: 10px 20px; color: #fff; transition: all 0.3s ease;">
          <i class="bi bi-arrow-left"></i> Voltar
        </a>
      </div>
    </div>
  </div>
</div>
{% endblock %}